{"remainingRequest":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/babel-loader/lib/index.js!/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/src/views/Login.vue","mtime":1623039437501},{"path":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nicolas/Escritorio/Grupo 3_Proyecto Bibliotech/Sistema/Aplicación Web/Frontend/bibliotech/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0ICd2dWUtdG9hc3Qtbm90aWZpY2F0aW9uL2Rpc3QvdGhlbWUtc3VnYXIuY3NzJzsKaW1wb3J0IGF1dGggZnJvbSAiQC9sb2dpY2EvYXV0aCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbUlkOiBudWxsLAogICAgICBtZW5zYWplOiAnJywKICAgICAgdGV4dG86ICcnLAogICAgICBydXRfbGVjdG9yOiAnJywKICAgICAgY29udHJhc2VuYV9sZWM6ICcnLAogICAgICBmb3RvOiAnJywKICAgICAgYWN0aXZvOiAnJywKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICBkYXRvczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbmljaWFyU2VzaW9uOiBmdW5jdGlvbiBpbmljaWFyU2VzaW9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncnV0LmpzJyksCiAgICAgICAgICB2YWxpZGF0ZSA9IF9yZXF1aXJlLnZhbGlkYXRlLAogICAgICAgICAgY2xlYW4gPSBfcmVxdWlyZS5jbGVhbiwKICAgICAgICAgIGZvcm1hdCA9IF9yZXF1aXJlLmZvcm1hdCwKICAgICAgICAgIGdldENoZWNrRGlnaXQgPSBfcmVxdWlyZS5nZXRDaGVja0RpZ2l0OwoKICAgICAgdHJ5IHsKICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sZWN0b3Jlcz9ydXRfbGVjdG9yPSIgKyBmb3JtYXQodGhpcy5ydXRfbGVjdG9yKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzLmRhdG9zID0gcmVzcG9uc2UuZGF0YTsgLy9jb25zb2xlLmxvZygnUVVFIFRJRU5FIExFQ1RPUkVTOiAnLHRoaXMuZGF0b3MpOwogICAgICAgICAgLy9jb25zb2xlLmxvZygnUVVFIFRJRU5FIExFQ1RPUkVTIHJ1dDogJyxmb3JtYXQodGhpcy5kYXRvc1swXS5ydXRfbGVjdG9yKSk7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdRVUUgVElFTkUgTEVDVE9SRVMgY29udHJhc2VuYTogJyx0aGlzLmRhdG9zWzBdLmNvbnRyYXNlbmFfbGVjKTsKICAgICAgICAgIC8vY29uc29sZS5sb2coJ1FVRSBUSUVORSBMRUNUT1JFUyB1cmwgZm90bzogJyx0aGlzLmRhdG9zWzBdLmZvdG8pOwoKICAgICAgICAgIHZhciB1c2VyID0gewogICAgICAgICAgICBydXRfbGVjdG9yOiBmb3JtYXQoX3RoaXMucnV0X2xlY3RvciksCiAgICAgICAgICAgIGNvbnRyYXNlbmFfbGVjOiBfdGhpcy5jb250cmFzZW5hX2xlYywKICAgICAgICAgICAgZm90bzogX3RoaXMuZGF0b3NbMF0uZm90bywKICAgICAgICAgICAgYWN0aXZvOiBfdGhpcy5kYXRvc1swXS5hY3Rpdm8KICAgICAgICAgIH07CgogICAgICAgICAgaWYgKHZhbGlkYXRlKF90aGlzLnJ1dF9sZWN0b3IpKSB7CiAgICAgICAgICAgIGlmIChmb3JtYXQoX3RoaXMucnV0X2xlY3RvcikgPT0gX3RoaXMuZGF0b3NbMF0ucnV0X2xlY3RvciAmJiBfdGhpcy5jb250cmFzZW5hX2xlYyA9PSBfdGhpcy5kYXRvc1swXS5jb250cmFzZW5hX2xlYykgewogICAgICAgICAgICAgIGlmIChfdGhpcy5kYXRvc1swXS5hY3Rpdm8gPT0gJ0EnKSB7CiAgICAgICAgICAgICAgICBhdXRoLnNldFVzZXJMb2dnZWQodXNlcik7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLm1lbnNhamUgPSAiQWNjZXNvIERlbmVnYWRvLiBUdSBwZXJmaWwgc2UgZW5jdWVudHJhIGluaGFiaWxpdGFkby4iOwogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5tZW5zYWplID0gIkhhcyBpbnRyb2R1Y2lkbyBtYWwgZWwgUnV0IG8gbGEgQ29udHJhc2XDsWEuIjsKICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLm1lbnNhamUgPSAiSGFzIGludHJvZHVjaWRvIG1hbCBlbCBSdXQgbyBsYSBDb250cmFzZcOxYS4iOwogICAgICAgICAgICBfdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBfdGhpcy5tZW5zYWplID0gIkhhcyBpbnRyb2R1Y2lkbyBtYWwgZWwgUnV0IG8gbGEgQ29udHJhc2XDsWEuIjsKICAgICAgICAgIF90aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgdGhpcy5tZW5zYWplID0gIkZhbGzDsyBlbCBpbmdyZXNvLiBQb3IgZmF2b3IgcmV2aXNlIGxvcyBkYXRvcyBpbmdyZXNhZG9zIGUgaW50ZW50ZSBudWV2YW1lbnRlLiI7CiAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wcm9iYXJVc2VybmFtZTogZnVuY3Rpb24gY29tcHJvYmFyVXNlcm5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnJ1dF9sZWN0b3IubGVuZ3RoID4gMCA/IHRydWUgOiBmYWxzZTsKICAgIH0sCiAgICBjb21wcm9iYXJQYXNzd29yZDogZnVuY3Rpb24gY29tcHJvYmFyUGFzc3dvcmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRyYXNlbmFfbGVjLmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n      <b-container fluid >\n            <b-row class=\"mt-3\">\n                <b-col cols=\"2\"></b-col>\n                <b-col cols=\"8\" align=\"center\">\n                    <b-card img-top style=\"width: rem;\" bg-variant=\"light\">                        \n\n                        <form action class=\"form\" @submit.prevent=\"iniciarSesion\">  \n                            <b-row class=\"mt-2\">\n                                <b-col></b-col>\n                                <b-col cols=\"3\">\n                                    <div><b-img src=\"http://poseidon.conpax.cl/~nicolas/Logo_Bibliotech.png\" class=\"d-inline-block align-top\" fluid alt=\"responsive image\"></b-img></div>\n                                </b-col>\n                                <b-col></b-col>\n                            </b-row>\n\n                            <b-row>\n                                <b-col></b-col>   \n                                <b-col align=\"center\" cols=\"8\">\n                                    <h5 class=\"mt-2\" align=\"center\">Sistema de Préstamos y Devoluciones Bibliotech</h5>\n                                </b-col>\n                                <b-col></b-col>   \n                            </b-row>\n                            \n                            <b-row class=\"mt-3\">\n                                <b-col>\n                                    <h5 class=\"mt-0\" align=\"center\" ><strong>Inicio de Sesión</strong></h5>\n                                </b-col>\n                            </b-row>\n                            \n                            <b-row class=\"mt-2\">    \n                                <b-col></b-col>          \n                                <b-col cols=\"8\">                  \n                                    <b-form-input type=\"text\" id=\"username\" name=\"username\" label=\"username\"\n                                    v-model=\"rut_lector\" placeholder=\"ej: 12.345.678-9\" class=\"form-control\" :state=\"comprobarUsername\" :bordered=true autofocus></b-form-input>\n                                        <b-form-invalid-feedback id=\"input-live-feedback\">Este campo es requerido</b-form-invalid-feedback>\n                                </b-col>  \n                                <b-col></b-col>                            \n                            </b-row>\n\n                            <b-row class=\"mt-2\">\n                                <b-col></b-col> \n                                <b-col cols=\"8\">                  \n                                    <b-form-input type=\"password\" id=\"contrasena\" name=\"contrasena\" label=\"contrasena\" align=\"center\"\n                                    v-model=\"contrasena_lec\" placeholder=\"Contraseña\" class=\"form-control\" :state=\"comprobarPassword\" :bordered=true></b-form-input>\n                                        <b-form-invalid-feedback id=\"input-live-feedback\">Este campo es requerido</b-form-invalid-feedback>\n                                </b-col>                                    \n                                <b-col></b-col> \n                            </b-row>\n\n                            <b-row class=\"mt-3\">  \n                                <b-col></b-col>\n                                <b-col align=\"center\"><b-button block variant=\"info\"  @click=\"iniciarSesion()\" >Iniciar Sesión</b-button></b-col>                  \n                                <b-col></b-col>                          \n                            </b-row>\n\n                            <b-row class=\"mt-3\">\n                                <b-col align=\"center\"><b-alert v-model=\"error\" variant=\"danger\" dismissible> {{mensaje}} </b-alert></b-col>\n                            </b-row>                                                   \n                        </form>\n                    </b-card>\n                </b-col>\n                <b-col cols=\"2\"></b-col>\n            </b-row>\n            <b-row class=\"mt-2\" ></b-row>\n        </b-container>\n    </div>\n</template>\n\n\n<script>    \n// import 'vue-toast-notification/dist/theme-sugar.css';\nimport auth from \"@/logica/auth\";\nimport axios from \"axios\";\nexport default {\n    name: 'Login',\n    created(){            \n                        \n    },\n    data(){\n        return{\n            itemId: null,\n            mensaje: '',\n            texto: '',\n            rut_lector: '',\n            contrasena_lec: '',\n            foto: '',\n            activo: '',\n            error: false,\n            datos: []\n        }\n    },\n    methods:{\n        iniciarSesion(){\n            const { validate, clean, format, getCheckDigit } = require('rut.js')\n            try {\n\n                axios.get(\"http://localhost:3000/lectores?rut_lector=\" + format(this.rut_lector)).then(response => {\n                    this.datos = response.data\n                    //console.log('QUE TIENE LECTORES: ',this.datos);\n                    //console.log('QUE TIENE LECTORES rut: ',format(this.datos[0].rut_lector));\n                    //console.log('QUE TIENE LECTORES contrasena: ',this.datos[0].contrasena_lec);\n                    //console.log('QUE TIENE LECTORES url foto: ',this.datos[0].foto);\n                    \n                    const user = {\n                        rut_lector: format(this.rut_lector),\n                        contrasena_lec: this.contrasena_lec,\n                        foto:this.datos[0].foto,\n                        activo:this.datos[0].activo\n                    };\n\n                    if (validate(this.rut_lector)) {\n                        if ((format(this.rut_lector) == this.datos[0].rut_lector) && (this.contrasena_lec == this.datos[0].contrasena_lec)) {\n                            if ((this.datos[0].activo == 'A')) {\n                                auth.setUserLogged(user);\n                                this.$router.push(\"/\");\n                            } else {\n                                this.mensaje = \"Acceso Denegado. Tu perfil se encuentra inhabilitado.\";\n                                this.error = true;\n                            }\n                        } else {\n                            this.mensaje = \"Has introducido mal el Rut o la Contraseña.\";\n                            this.error = true;\n                        }\n\n                    } else {\n                        this.mensaje = \"Has introducido mal el Rut o la Contraseña.\";\n                        this.error = true;\n                    }\n\n                })\n                .catch(error => {\n                    this.mensaje = \"Has introducido mal el Rut o la Contraseña.\";\n                    this.error = true;\n                });\n            } catch (error) {\n                console.log(error);\n                this.mensaje = \"Falló el ingreso. Por favor revise los datos ingresados e intente nuevamente.\";\n                this.error = true;\n            }\n        }\n    },\n    computed:{\n        comprobarUsername(){\n            return this.rut_lector.length > 0 ? true : false;\n        },\n        comprobarPassword(){\n            return this.contrasena_lec.length > 0 ? true : false;\n        }\n    },\n    mounted:function(){\n\n    }                 \n}\n</script>"],"sourceRoot":"src/views"}]}